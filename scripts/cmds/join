module.exports = {
  config: {
    name: "join",
    version: "1.1",
    author: "Crepin & Copilot",
    role: 2, // uniquement accessible aux admins dÃ©clarÃ©s dans config.json
    shortDescription: {
      fr: "Invoque l'admin dans un groupe (Solo Leveling style)"
    },
    longDescription: {
      fr: "Permet Ã  lâ€™administrateur dâ€™Ãªtre ajoutÃ© dans un groupe via son UID, si le bot y est dÃ©jÃ  prÃ©sent."
    },
    category: "âš™ï¸ Outils admin",
    guide: {
      fr: "{pn} <UID_du_groupe>"
    }
  },

  onStart: async function ({ api, event, args }) {
    const { ADMINBOT } = global.GoatBot.config; // ğŸ’¡ rÃ©cupÃ¨re les UID admins depuis config.json
    const isAdmin = ADMINBOT.includes(event.senderID);

    if (!isAdmin) {
      return api.sendMessage("âŒ Cette commande est rÃ©servÃ©e aux Monarques du systÃ¨me.", event.threadID);
    }

    const targetGroupID = args[0];
    if (!targetGroupID || isNaN(targetGroupID)) {
      return api.sendMessage("ğŸ“Œ Syntaxe : .join <UID_du_groupe>", event.threadID);
    }

    try {
      await api.addUserToGroup(event.senderID, targetGroupID);
      return api.sendMessage(
        `ğŸ©¸ Portail ouvert...\nğŸ§­ Le Monarque a Ã©tÃ© projetÃ© dans le champ de bataille nÂ°${targetGroupID}.`,
        event.threadID
      );
    } catch (err) {
      console.error("Erreur d'invocation :", err);
      return api.sendMessage("âš ï¸ Impossible de tâ€™ajouter. Le bot doit Ãªtre prÃ©sent ET autorisÃ© dans le groupe.", event.threadID);
    }
  }
};
